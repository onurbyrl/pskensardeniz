{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">



<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Giriş Yap</title>
    <link rel="canonical" href="index.html" />
    <base>
    <meta name="description"
        content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" type="image/x-icon" href="favicon.webp">

    <link rel="stylesheet" href="{% static 'css/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/slick.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/slick-theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/sal.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/feather.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/fontawesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/euclid-circulara.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/swiper.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/magnify.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/odometer.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/animation.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/bootstrap-select.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/magnigy-popup.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    
    <!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            '../connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1152557622805558');
        fbq('track', 'PageView');
    </script>
    <noscript><img loading="lazy" height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=1152557622805558&amp;ev=PageView&amp;noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->



    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S9TWP7FWTJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-S9TWP7FWTJ');
    </script>
    <!-- Google tag (gtag.js) end -->

</head>

<body class="rbt-header-sticky">
        <div id="app">
            <!-- Start Header Area -->
            <header class="rbt-header rbt-header-9">
                {% include '../header.html' %}
                {% include '../navbar.html' %}
            </header>

            <!-- Mobile Menu Section -->
            {% include '../mobile-section.html' %}
        </div>

        <div class="rbt-breadcrumb-default ptb--100 ptb_md--50 ptb_sm--30 bg-gradient-1">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb-inner text-center">
                            <h2 class="title">{% trans "Giriş Yap" %}</h2>
                            <ul class="page-list">
                                <!-- <li class="rbt-breadcrumb-item"><a href="{% url 'core:home' %}">Ensar Deniz Danışmanlık</a></li> -->
                                <li>
                                    <div class="icon-right"><i class="feather-chevron-right"></i></div>
                                </li>
                                <li class="rbt-breadcrumb-item active">{% trans "Giriş Yap" %}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="rbt-elements-area bg-color-white rbt-section-gap">
            <div class="container">
                <div class="row gy-5 d-flex justify-content-center row--30">



                    <div class="col-lg-6">

                        <div class="rbt-contact-form contact-form-style-1 max-width-auto">
                            <h3 class="title">{% trans "Giriş Yap" %}</h3>
                            <form id="loginForm" class="max-width-auto">
                                {% csrf_token %}
                                <div class="form-group">
                                    <input id="email" type="text" name="email" />
                                    <label>{% trans "E-mail Adresi" %}</label>
                                    <span class="focus-border"></span>
                                </div>
                                <div class="form-group">
                                    <input id="sifre" name="sifre" type="password">
                                    <label>{% trans "Şifre" %} *</label>
                                    <span class="focus-border"></span>
                                </div>

                                <div class="row mb--30">

                                    <div class="col-lg-6">
                                        <div class="rbt-lost-password">
                                            <a class="rbt-btn-link" href="{% url 'users:password_reset_page' %}"
                                                title="Şifremi Unuttum?">{% trans "Şifremi Unuttum" %}?</a>
                                            <br>
                                            <a class="rbt-btn-link" href="{% url 'users:register' %}" title="Kayıt Ol">{% trans "Kayıt Ol" %}</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-submit-group">
                                    <button type="submit" class="rbt-btn btn-md btn-gradient hover-icon-reverse w-100">
                                        <span class="icon-reverse-wrapper">
                                            <span class="btn-text">{% trans "Giriş Yap" %}</span>
                                            <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                                            <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                                        </span>
                                    </button>
                                </div>
                            </form>



                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Start Footer aera -->
        {% include '../footer.html' %}
        <!-- End Footer aera -->

        <div class="rbt-progress-parent">
            <svg class="rbt-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
                <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
            </svg>
        </div>
        <div class="whatsapp hidden-sm" id="scroll-to-top2">
            <a href="https://wa.me/05367169453" target="_blank" title="Whatsapp İletişim Hattı"><img loading="lazy"
                    src="/static/whatsapp.png"></a>
        </div>
        <div class="whatsapp hidden-sm" id="scroll-to-top2">
            <a class=""
                href="https://api.whatsapp.com/send?phone=05367169453&amp;text=Merhaba%20bilgi%20almak%20%C4%B0stiyorum&amp;source=&amp;data="
                title="Whatsapp İletişim Hattı" target="_blank">
                <img loading="lazy" src="/static/whatsapp.png">
            </a>
        </div>
    </div>

    <!-- <script src="../static/js/custom.js"></script>-->


    <script src="http://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>

    <script src="{% static 'js/vendor/jquery.js' %}"></script>
    <script src="../cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="{% static 'js/vue.js' %}"></script>
    <script src="{% static 'js/customd8a8.js?v=20250313' %}"></script>





    <!-- JS
        ============================================ -->
    <script src="{% static 'js/vendor/modernizr.min.js' %}"></script>
    <script src="{% static 'js/vendor/sal.js' %}"></script>
    <script src="{% static 'js/vendor/swiper.js' %}"></script>
    <script src="{% static 'js/vendor/magnify.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery-appear.js' %}"></script>
    <script src="{% static 'js/vendor/odometer.js' %}"></script>
    <script src="{% static 'js/vendor/backtotop.js' %}"></script>
    <script src="{% static 'js/vendor/isotop.js' %}"></script>
    <script src="{% static 'js/vendor/imageloaded.js' %}"></script>
    <script src="{% static 'js/vendor/wow.js' %}"></script>
    <script src="{% static 'js/vendor/waypoint.min.js' %}"></script>
    <script src="{% static 'js/vendor/easypie.js' %}"></script>
    <script src="{% static 'js/vendor/text-type.js' %}"></script>
    <script src="{% static 'js/vendor/jquery-one-page-nav.js' %}"></script>
    <script src="{% static 'js/vendor/bootstrap-select.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery-ui.js' %}"></script>
    <script src="{% static 'js/vendor/magnify-popup.min.js' %}"></script>
    <script src="{% static 'js/vendor/paralax-scroll.js' %}"></script>
    <script src="{% static 'js/vendor/paralax.min.js' %}"></script>
    <script src="{% static 'js/vendor/countdown.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>


    <script>
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== "") {
                const cookies = document.cookie.split(";");
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Çerez ismini kontrol et
                    if (cookie.substring(0, name.length + 1) === (name + "=")) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        const csrfToken = getCookie("csrftoken");

        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
    
            // const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
            const email = document.getElementById('email').value;
            const sifre = document.getElementById('sifre').value;
    
            fetch("{% url 'users:login' %}", {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken,
                    'Content-Type': 'intervention/json',
                },
                body: JSON.stringify({
                    email: email,
                    sifre: sifre
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    Swal.fire({
                        icon: 'success',
                        title: '{% trans "Giriş Başarılı!" %}',
                        text: data.message,
                        timer: 2000,
                        showConfirmButton: false
                    }).then(() => {
                        window.location.href = data.redirect_url;
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: '{% trans "Hata!" %}',
                        text: data.message
                    });
                }
            })
            .catch(error => {
                Swal.fire({
                    icon: 'error',
                    title: '{% trans "Hatalı Giriş" %}',
                    text: '{% trans "Email adresi veya şifre hatalı!" %}'
                });
            });
        });
    </script>
</body>



</html>